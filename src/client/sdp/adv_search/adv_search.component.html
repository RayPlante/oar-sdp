<style id="antiClickjack">
  body {
    display: none !important;
  }
</style>
<script type="text/javascript">
  if (self === top) {
    var antiClickjack = document.getElementById("antiClickjack");
    antiClickjack.parentNode.removeChild(antiClickjack);
  } else {
    top.location = self.location;
  }
</script>

<div class="ui-g" style="background-color: #153971;color: #FFFFFF">
  <div class="ui-g-2">
  </div>
  <div class="ui-g-10">
    <div class="EmptyBox20"></div>
    <label style="font-size: x-large;float: left;display: block;"><i class="faa faa-cogs faa-lg"></i> Advanced Search Builder</label>
    <ol class="breadcrumb" style="float: right;">
      <li><a href="#" style="color: #fff;">Home</a></li>
      <li class="active breadCrumb-text" >Advanced Search Builder</li>
    </ol>
    <div class="EmptyBox20"></div>
  </div>
</div>
<div class="ui-fluid"  style="background-color: #EFEFEF">
  <div class="ui-g ">
    <div class="ui-g-12">
      <div class="ui-g form-group">
        <div class="ui-g-12 ui-md-2">
        </div>
        <div class="ui-g-12 ui-md-4" style="padding-right: 0px;padding-left: 0px;padding-bottom: 0px">
          <label for="advsearchinput" class="hideLabel">Search Input</label>
          <div class="inner-addon left-addon " style="background-color: #FFFFFF">
            <i class="glyphicon glyphicon-search"></i>  <p-autoComplete [inputStyle]="{'width': '100%','padding-left':'40px','height': '42px','font-weight': '400',
        'font-style': 'italic','font-size': '20px'}" (onFocus)="clearText()" (onBlur) = "addPlaceholder()" placeholder="" [(ngModel)]="searchValue" inputId="advsearchinput" (keyup.enter) = "search(searchValue,searchTaxonomyKey,queryAdvSearch)" [suggestions]="suggestedTaxonomyList" (completeMethod)="filterTaxonomies($event)" [minLength]="1" [maxlength] = "2048" [size] = "50" >
          </p-autoComplete>
          </div>
        </div>
        <div class="ui-g-12 ui-md-2" style="padding-left: 0px;padding-right: 0px;padding-bottom: 0px">
          <p-dropdown [options]="taxonomies"  inputId="searchtaxonomy" [style]="{'width':'100%',
        'background-color': '#FFFFFF','height': '42px'
        ,'font-weight': '900','font-style': 'italic','display': 'flex','align-items':'center'}" [(ngModel)]="searchTaxonomyKey" >
          </p-dropdown>
        </div>
        <div class="ui-g-12 ui-md-1" style="padding-left: 0px;padding-right: 0px;padding-bottom: 0px">
          <button class="searchButton" (click)="search(searchValue,searchTaxonomyKey,'yes')" pButton label="Search" type="submit" ></button>          </div>
        <div class="ui-g-12 ui-md-2">
        </div>
      </div>
      <div class="ui-g-12 ui-md-2">
      </div>
      <div class="ui-g-12 ui-md-6">
        <b> Examples: </b>
        <a class="examples" (click)="searchExample('&quot;Kinetics database&quot;');" href="#!">"Kinetics database" </a> &nbsp;
        <a class="examples" (click)="searchExample('Gallium');" href="#!" >Gallium </a>&nbsp;
        <a class="examples" (click)="searchExample('&quot;SRD 101&quot;');" href="#!" >"SRD 101" </a>&nbsp;
        <a class="examples" (click)="searchExample('XPDB');" href="#!" >XPDB </a>&nbsp;
        <a class="examples" (click)="searchExample('Interatomic Potentials');" href="#!" >Interatomic Potentials </a>&nbsp;
      </div>
    </div>
    <p-dialog header="Save Query" [(visible)]="showQueryName" modal="modal" [responsive]="true" [width]="450" [height]="200" [minWidth]="200">
    <div  class="ui-g-12 search-builder-background" *ngIf = "showQueryName == true" >
      <div class="ui-g-12 ui-md-3">
        Query Name :
      </div>
      <div class="ui-g-12 ui-md-6">
        <input type="text" style="width: 100%;border:.5px solid grey;background-color: #FFFFFF;height: 30px;font-weight: 400;" [(ngModel)]="queryName" pInputText />
      </div>
      <div class="ui-g-12 ui-md-3">
      </div>
    </div>
      <div  class="ui-g-12 search-builder-background" *ngIf = "showQueryName == true" >
        <div class="ui-g-12 ui-md-3">
        </div>
        <div class="ui-g-12 ui-md-12 ui-sm-12" style="width:30%">
          <button class="searchButton" (click)="saveAdvSearchQuery(queryName)" pButton label="Save" type="submit" icon="ui-icon-save"></button>
        </div>
      </div>
    </p-dialog>
    <div  class="ui-g-12 search-builder-background">
      <div class="ui-g-12 ui-md-2">
      </div>
      <div class="ui-g-12 ui-md-4">
        <b>Build</b> : <p-dropdown [options]="advSearchList" (onChange) = "showAdvSearch()" [style]="{'width':'50%',
        'background-color': '#FFFFFF','height': '32px'
        ,'font-weight': '900','font-style': 'italic','align-items':'center'}" [(ngModel)]="selectedAdvSearch"></p-dropdown>
      </div>
    </div>
    <div class="EmptyBox20" style="background-color:#fff" *ngIf = "selectedAdvSearch == ''"></div>
    <div class="ui-g-12 search-builder-background" *ngIf = "showAdvSearchBuilder" >
    <div  class="ui-g-12 search-builder-background"  *ngFor='let row of rows; let rowIndex = index'>
      <div *ngIf='rowIndex > 0' class="ui-g-12 ui-md-1">
      </div>
      <div *ngIf='rowIndex > 0' class="ui-g-12 ui-md-1" style="padding-right: 0em;padding-left: 0em" >
        <p-dropdown  (click) = "saveSearch()" [style]="{'width':'100%','background-color': '#FFFFFF','height': '30px'
        ,'font-weight': '400','font-style': 'italic','border':'.5px solid grey'}" [options]="operators" [(ngModel)]="row.column1" ></p-dropdown>
      </div>
      <div *ngIf='rowIndex == 0' class="ui-g-12 ui-md-2">
      </div>
      <div class="ui-g-12 ui-md-4 " >
        <label for="fieldstext" class="hideLabel">Fields text</label>
        <input type="text" id="fieldstext" pInputText style="width: 100%;border:.5px solid grey;background-color: #FFFFFF;height: 30px;font-weight: 400;
          font-style: italic" [(ngModel)]="row.column2" (keyup)="saveSearch()" placeholder="Fields text..."   />
      </div>
      <div class="ui-g-12 ui-md-2 " style="padding-left: 0em;padding-right: 0em">
        <p-dropdown [options]="fields"  [style]="{'width':'100%','background-color': '#FFFFFF','height': '30px'
        ,'font-weight': '400','font-style': 'italic','border':'.5px solid grey'}" [(ngModel)]="row.column3" (click) = "saveSearch()" >
        </p-dropdown>
      </div>
      <div class="ui-g-12 ui-md-3  " style="width: 3%;" *ngIf="showDeleteButton == true" >
        <button type="button" class="addRemoveButton search-builder-button-remove" (click)="deleteRow(rowIndex)" pButton icon="ui-icon-remove"></button>
      </div>
      <div *ngIf="rowIndex == rows.length -1 " class="ui-g-12 ui-md-3">
        <button type="button" class="addRemoveButton search-builder-button-add" (click)="addRow()" pButton  icon="ui-icon-add"></button>
      </div>
  </div>
    <div  class="ui-g-12 search-builder-background" >
      <div class="ui-g-12 ui-md-2">
      </div>
      <div class="ui-g-12 ui-md-2 ui-sm-2" style="width:10%">
        <button class="searchButton" *ngIf = "selectedAdvSearch != 'add'" (click)="deleteAdvSearchQuery(selectedAdvSearch)" pButton icon="ui-icon-delete" label="Delete" type="submit" ></button>
      </div>
      <div class="ui-g-12 ui-md-2 ui-sm-2" style="width:10%">
        <button class="searchButton" *ngIf = "selectedAdvSearch != 'add'" (click)="resetAdvSearchQuery()" pButton label="Reset" icon="ui-icon-warning" type="submit" ></button>
      </div>
      <div class="ui-g-12 ui-md-2 ui-sm-2" style="width:10%">
        <button class="searchButton" (click)="displayQuery()" *ngIf = "selectedAdvSearch == 'add'" pButton label="Save" type="submit" icon="ui-icon-save"></button>
        <button class="searchButton" (click)="saveAdvSearchQuery(selectedAdvSearch)" *ngIf = "selectedAdvSearch != 'add'"  pButton label="Save" icon="ui-icon-save" type="submit" ></button>
      </div>
      <div class="ui-g-12 ui-md-2 ui-sm-2" style="width:10%">
        <button class="searchButton" (click)="cancelAdvSearchQuery()" pButton label="Cancel" type="submit" icon="ui-icon-cancel" ></button>
      </div>
    </div>
    <div style="height:150px;background-color: #fff"></div>
  </div>
  </div>
</div>
